<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.festivalBooking.festival.dao.FestivalDAO">
	<insert id="insertFestival" parameterType="com.festivalBooking.festival.model.Festival"
	useGeneratedKeys="true" keyProperty="id">
		INSERT INTO `festival`
		(
			`userId`
			, `title`
			, `date`
			, `startTime`
			, `endTime`
			, `place`
			, `address`
			, `price`
			, `priceOffline`
			, `imagePath`
			, `lineUp`
			, `explain`
			, `warning`
			, `festivalMaster`
			, `askRoot`
			, `isTimeOver`
			, `createdAt`
			, `updatedAt`
		)
		VALUES
		(
			#{userId}
			, #{title}
			, #{date}
			, #{startTime}
			, #{endTime}
			, #{place}
			, #{address}
			, #{price}
			, #{priceOffline}
			, #{imagePath}
			, #{lineUp}
			, #{explain}
			, #{warning}
			, #{festivalMaster}
			, #{askRoot}
			, #{isTimeOver}
			, NOW()
			, NOW()
		)
	</insert>
	
	<select id="getFestivalList" resultType="map">
		SELECT * FROM `festival`
		order by `id` DESC
	</select>

	<select id="getFestivalListByLimit" resultType="map">
		SELECT * FROM `festival`
		WHERE `date` >= #{startDate}
		AND `date` &lt;= #{endDate}
		order by `id` DESC
	</select>

	<select id="getFestivalListByUserId" parameterType="int" resultType="com.festivalBooking.festival.model.Festival">
		SELECT * FROM `festival`
		WHERE `userId` = #{userId}
		order by `id` DESC
	</select>

	<select id="getFestivalByFestivalId" parameterType="int"
	resultType="com.festivalBooking.festival.model.Festival">
		SELECT * FROM `festival`
		WHERE `id` = #{festivalId}
		order by `id` DESC
	</select>
</mapper>